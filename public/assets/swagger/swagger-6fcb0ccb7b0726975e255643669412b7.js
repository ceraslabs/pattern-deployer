// Generated by CoffeeScript 1.3.3
(function(){var e,t,n,r,i,s,o=function(e,t){return function(){return e.apply(t,arguments)}};e=function(){function e(e){e==null&&(e={}),e.discoveryUrl!=null&&(this.discoveryUrl=e.discoveryUrl),e.debug!=null&&(this.debug=e.debug),this.apiKeyName=e.apiKeyName!=null?e.apiKeyName:"api_key",e.apiKey!=null&&(this.api_key=e.apiKey),e.api_key!=null&&(this.api_key=e.api_key),e.verbose!=null&&(this.verbose=e.verbose),this.supportHeaderParams=e.supportHeaderParams!=null?e.supportHeaderParams:!1,this.supportedSubmitMethods=e.supportedSubmitMethods!=null?e.supportedSubmitMethods:["get"],e.success!=null&&(this.success=e.success),this.failure=e.failure!=null?e.failure:function(){},this.progress=e.progress!=null?e.progress:function(){},this.headers=e.headers!=null?e.headers:{},this.booleanValues=e.booleanValues!=null?e.booleanValues:new Array("true","false"),this.discoveryUrl=this.suffixApiKey(this.discoveryUrl),e.success!=null&&this.build()}return e.prototype.discoveryUrl="http://api.wordnik.com/v4/resources.json",e.prototype.debug=!1,e.prototype.api_key=null,e.prototype.basePath=null,e.prototype.build=function(){var e=this;return this.progress("fetching resource list: "+this.discoveryUrl),jQuery.getJSON(this.discoveryUrl,function(t){var n,r,i,o,u,a,f,l;t.apiVersion!=null&&(e.apiVersion=t.apiVersion),t.basePath!=null&&jQuery.trim(t.basePath).length>0?(e.basePath=t.basePath,e.basePath.match(/^HTTP/i)==null&&e.fail("discoveryUrl basePath must be a URL."),e.basePath=e.basePath.replace(/\/$/,"")):(e.basePath=e.discoveryUrl.substring(0,e.discoveryUrl.lastIndexOf("/")),log("derived basepath from discoveryUrl as "+e.basePath)),e.resources={},e.resourcesArray=[];if(t.resourcePath!=null){e.resourcePath=t.resourcePath,n=null,f=t.apis;for(i=0,u=f.length;i<u;i++)r=f[i],n===null?n=new s(r,e):n.addOperations(r.path,r.operations);n!=null&&(e.resources[n.name]=n,e.resourcesArray.push(n),n.ready=!0,e.selfReflect())}else{l=t.apis;for(o=0,a=l.length;o<a;o++)r=l[o],n=new s(r,e),e.resources[n.name]=n,e.resourcesArray.push(n)}return e}).error(function(t){return e.fail(t.status+" : "+t.statusText+" "+e.discoveryUrl)})},e.prototype.selfReflect=function(){var e,t,n;if(this.resources==null)return!1;n=this.resources;for(t in n){e=n[t];if(e.ready==null)return!1}this.setConsolidatedModels(),this.ready=!0;if(this.success!=null)return this.success()},e.prototype.fail=function(e){throw this.failure(e),e},e.prototype.setConsolidatedModels=function(){var e,t,n,r,i,s,o,u,a;this.modelsArray=[],this.models={},o=this.resources;for(r in o){n=o[r];for(t in n.models)this.models[t]==null&&(this.models[t]=n.models[t],this.modelsArray.push(n.models[t]))}u=this.modelsArray,a=[];for(i=0,s=u.length;i<s;i++)e=u[i],a.push(e.setReferencedModels(this.models));return a},e.prototype.suffixApiKey=function(e){var t;return this.api_key!=null&&jQuery.trim(this.api_key).length>0&&e!=null?(t=e.indexOf("?")>0?"&":"?",e+t+this.apiKeyName+"="+this.api_key):e},e.prototype.help=function(){var e,t,n,r,i,s,o,u,a,f;u=this.resources;for(i in u){r=u[i],console.log(i),a=r.operations;for(t in a){e=a[t],console.log("  "+e.nickname),f=e.parameters;for(s=0,o=f.length;s<o;s++)n=f[s],console.log("    "+n.name+(n.required?" (required)":"")+" - "+n.description)}}return this},e}(),s=function(){function e(e,t){var n,r=this;this.api=t,this.path=this.api.resourcePath!=null?this.api.resourcePath:e.path,this.description=e.description,n=this.path.split("/"),this.name=n[n.length-1].replace(".{format}",""),this.basePath=this.api.basePath,this.operations={},this.operationsArray=[],this.modelsArray=[],this.models={},e.operations!=null&&this.api.resourcePath!=null?(this.api.progress("reading resource "+this.name+" models and operations"),this.addModels(e.models),this.addOperations(e.path,e.operations),this.api[this.name]=this):(this.path==null&&this.api.fail("SwaggerResources must have a path."),this.url=this.api.suffixApiKey(this.api.basePath+this.path.replace("{format}","json")),this.api.progress("fetching resource "+this.name+": "+this.url),jQuery.getJSON(this.url,function(e){var t,n,i,s;e.basePath!=null&&jQuery.trim(e.basePath).length>0&&(r.basePath=e.basePath,r.basePath=r.basePath.replace(/\/$/,"")),r.addModels(e.models);if(e.apis){s=e.apis;for(n=0,i=s.length;n<i;n++)t=s[n],r.addOperations(t.path,t.operations)}return r.api[r.name]=r,r.ready=!0,r.api.selfReflect()}).error(function(e){return r.api.fail(e.status+" : "+e.statusText+" "+r.url)}))}return e.prototype.addModels=function(e){var n,r,i,s,o,u,a;if(e!=null){for(r in e)i=new t(r,e[r]),this.modelsArray.push(i),this.models[r]=i;u=this.modelsArray,a=[];for(s=0,o=u.length;s<o;s++)n=u[s],a.push(n.setReferencedModels(this.models));return a}},e.prototype.addOperations=function(e,t){var n,i,s,o,u;if(t){u=[];for(s=0,o=t.length;s<o;s++)n=t[s],i=new r(n.nickname,e,n.httpMethod,n.parameters,n.summary,n.notes,n.responseClass,n.errorResponses,this,n.supportedContentTypes),this.operations[i.nickname]=i,u.push(this.operationsArray.push(i));return u}},e.prototype.help=function(){var e,t,n,r,i,s,o;s=this.operations;for(t in s){e=s[t],console.log("  "+e.nickname),o=e.parameters;for(r=0,i=o.length;r<i;r++)n=o[r],console.log("    "+n.name+(n.required?" (required)":"")+" - "+n.description)}return this},e}(),t=function(){function e(e,t){var r;this.name=t.id!=null?t.id:e,this.properties=[];for(r in t.properties)this.properties.push(new n(r,t.properties[r]))}return e.prototype.setReferencedModels=function(e){var t,n,r,i,s;i=this.properties,s=[];for(n=0,r=i.length;n<r;n++)t=i[n],e[t.dataType]!=null?s.push(t.refModel=e[t.dataType]):t.refDataType!=null&&e[t.refDataType]!=null?s.push(t.refModel=e[t.refDataType]):s.push(void 0);return s},e.prototype.getMockSignature=function(e,t){var n,r,i,s,o,u,a,f,l,c,h,p,d,v;s=[],d=this.properties;for(l=0,h=d.length;l<h;l++)i=d[l],s.push(i.toString());u='<span style="font-weight: bold; color: #000; font-size: 1.0em">',f='<span style="font-weight: bold; color: #000; font-size: 1.1em">',a="</span>",r=u+"class "+this.name+"("+a,n=u+")"+a,o=r+"<span>"+s.join("</span>, <span>")+"</span>"+n,e!=null&&(o=f+e+a+"<br/>"+o),v=this.properties;for(c=0,p=v.length;c<p;c++)i=v[c],i.refModel!=null&&i.refModel!==t&&(o+="<br>"+i.refModel.getMockSignature(void 0,this));return o},e.prototype.createJSONSample=function(e){var t,n,r,i,s;n={},s=this.properties;for(r=0,i=s.length;r<i;r++)t=s[r],n[t.name]=t.getSampleValue(e);return n},e}(),n=function(){function e(e,t){this.name=e,this.dataType=t.type,this.isArray=this.dataType.toLowerCase()==="array",this.descr=t.description,t.items!=null&&(t.items.type!=null&&(this.refDataType=t.items.type),t.items.$ref!=null&&(this.refDataType=t.items.$ref)),this.dataTypeWithRef=this.refDataType!=null?this.dataType+"["+this.refDataType+"]":this.dataType,t.allowableValues!=null&&(this.valueType=t.allowableValues.valueType,this.values=t.allowableValues.values,this.values!=null&&(this.valuesString="'"+this.values.join("' or '")+"'"))}return e.prototype.getSampleValue=function(e){var t;return this.refModel!=null&&this.refModel!==e?t=this.refModel.createJSONSample(this.refModel):this.isArray?t=this.refDataType:t=this.dataType,this.isArray?[t]:t},e.prototype.toString=function(){var e;return e=this.name+": "+this.dataTypeWithRef,this.values!=null&&(e+=" = ['"+this.values.join("' or '")+"']"),this.descr!=null&&(e+=" {"+this.descr+"}"),e},e}(),r=function(){function e(e,t,n,r,i,s,u,a,f,l){var c,h,p,d,v,m,g,y,b,w=this;this.nickname=e,this.path=t,this.httpMethod=n,this.parameters=r!=null?r:[],this.summary=i,this.notes=s,this.responseClass=u,this.errorResponses=a,this.resource=f,this.supportedContentTypes=l,this["do"]=o(this["do"],this),this.nickname==null&&this.resource.api.fail("SwaggerOperations must have a nickname."),this.path==null&&this.resource.api.fail("SwaggerOperation "+e+" is missing path."),this.httpMethod==null&&this.resource.api.fail("SwaggerOperation "+e+" is missing httpMethod."),this.path=this.path.replace("{format}","json"),this.httpMethod=this.httpMethod.toLowerCase(),this.isGetMethod=this.httpMethod==="get",this.resourceName=this.resource.name,((g=this.responseClass)!=null?g.toLowerCase():void 0)==="void"&&(this.responseClass=void 0),this.responseClass!=null&&(this.responseClassSignature=this.getSignature(this.responseClass,this.resource.models),this.responseSampleJSON=this.getSampleJSON(this.responseClass,this.resource.models)),this.errorResponses=this.errorResponses||[],y=this.parameters;for(p=0,v=y.length;p<v;p++){c=y[p],c.name=c.name||c.dataType,c.dataType.toLowerCase()==="boolean"&&(c.allowableValues={},c.allowableValues.values=this.resource.api.booleanValues),c.signature=this.getSignature(c.dataType,this.resource.models),c.sampleJSON=this.getSampleJSON(c.dataType,this.resource.models);if(c.allowableValues!=null){c.allowableValues.valueType==="RANGE"?c.isRange=!0:c.isList=!0;if(c.allowableValues.values!=null){c.allowableValues.descriptiveValues=[],b=c.allowableValues.values;for(d=0,m=b.length;d<m;d++)h=b[d],c.defaultValue!=null&&c.defaultValue===h?c.allowableValues.descriptiveValues.push({value:h,isDefault:!0}):c.allowableValues.descriptiveValues.push({value:h,isDefault:!1})}}}this.resource[this.nickname]=function(e,t,n){return w["do"](e,t,n)}}return e.prototype.isListType=function(e){return e.indexOf("[")>=0?e.substring(e.indexOf("[")+1,e.indexOf("]")):void 0},e.prototype.getSignature=function(e,t){var n,r;return r=this.isListType(e),n=r!=null&&t[r]||t[e]!=null?!1:!0,n?e:r!=null?t[r].getMockSignature(e):t[e].getMockSignature(e)},e.prototype.getSampleJSON=function(e,t){var n,r,i;r=this.isListType(e),n=r!=null&&t[r]||t[e]!=null?!1:!0,i=n?void 0:r!=null?t[r].createJSONSample():t[e].createJSONSample();if(i)return i=r?[i]:i,JSON.stringify(i,null,2)},e.prototype["do"]=function(e,t,n){var r,s;return e==null&&(e={}),typeof e=="function"&&(n=t,t=e,e={}),n==null&&(n=function(e,t,n){return console.log(e,t,n)}),t==null&&(t=function(e){return console.log(e)}),e.headers!=null&&(s=e.headers,delete e.headers),e.body!=null&&(r=e.body,delete e.body),new i(this.httpMethod,this.urlify(e),s,r,t,n,this)},e.prototype.pathJson=function(){return this.path.replace("{format}","json")},e.prototype.pathXml=function(){return this.path.replace("{format}","xml")},e.prototype.urlify=function(e,t){var n,r,i,s,o,u,a;t==null&&(t=!0),s=this.resource.basePath+this.pathJson(),a=this.parameters;for(o=0,u=a.length;o<u;o++){n=a[o];if(n.paramType==="path"){if(!e[n.name])throw""+n.name+" is a required path param.";i=new RegExp("{"+n.name+"[^}]*}","gi"),s=s.replace(i,encodeURIComponent(e[n.name])),delete e[n.name]}}return t&&this.resource.api.api_key!=null&&this.resource.api.api_key.length>0&&(e[this.apiKeyName]=this.resource.api.api_key),this.supportHeaderParams()?r=jQuery.param(this.getQueryParams(e,t)):r=jQuery.param(this.getQueryAndHeaderParams(e,t)),r!=null&&r.length>0&&(s+="?"+r),s},e.prototype.supportHeaderParams=function(){return this.resource.api.supportHeaderParams},e.prototype.supportedSubmitMethods=function(){return this.resource.api.supportedSubmitMethods},e.prototype.getQueryAndHeaderParams=function(e,t){return t==null&&(t=!0),this.getMatchingParams(["query","header"],e,t)},e.prototype.getQueryParams=function(e,t){return t==null&&(t=!0),this.getMatchingParams(["query"],e,t)},e.prototype.getHeaderParams=function(e,t){return t==null&&(t=!0),this.getMatchingParams(["header"],e,t)},e.prototype.getMatchingParams=function(e,t,n){var r,i,s,o,u,a,f,l;r={},f=this.parameters;for(u=0,a=f.length;u<a;u++)s=f[u],jQuery.inArray(s.paramType,e)>=0&&t[s.name]&&(r[s.name]=t[s.name]);n&&this.resource.api.api_key!=null&&this.resource.api.api_key.length>0&&(r[this.resource.api.apiKeyName]=this.resource.api.api_key);if(jQuery.inArray("header",e)>=0){l=this.resource.api.headers;for(i in l)o=l[i],r[i]=o}return r},e.prototype.help=function(){var e,t,n,r;r=this.parameters;for(t=0,n=r.length;t<n;t++)e=r[t],console.log("    "+e.name+(e.required?" (required)":"")+" - "+e.description);return this},e}(),i=function(){function e(e,t,n,r,i,s,o){var u,a=this;this.type=e,this.url=t,this.headers=n,this.body=r,this.successCallback=i,this.errorCallback=s,this.operation=o;if(this.type==null)throw"SwaggerRequest type is required (get/post/put/delete).";if(this.url==null)throw"SwaggerRequest url is required.";if(this.successCallback==null)throw"SwaggerRequest successCallback is required.";if(this.errorCallback==null)throw"SwaggerRequest error callback is required.";if(this.operation==null)throw"SwaggerRequest operation is required.";this.operation.resource.api.verbose&&console.log(this.asCurl()),this.headers||(this.headers={}),this.operation.resource.api.api_key!=null&&(this.headers[this.apiKeyName]=this.operation.resource.api.api_key);if(this.headers.mock==null){u={type:this.type,url:this.url,data:JSON.stringify(this.body),dataType:"json",error:function(e,t,n){return a.errorCallback(e,t,n)},success:function(e){return a.successCallback(e)}};if(u.type.toLowerCase()==="post"||u.type.toLowerCase()==="put")u.contentType="application/json";jQuery.ajax(u)}}return e.prototype.asCurl=function(){var e,t,n;return e=function(){var e,r;e=this.headers,r=[];for(t in e)n=e[t],r.push('--header "'+t+": "+n+'"');return r}.call(this),"curl "+e.join(" ")+" "+this.url},e}(),window.SwaggerApi=e,window.SwaggerResource=s,window.SwaggerOperation=r,window.SwaggerRequest=i}).call(this);